#!/bin/sh
# Pre-commit hook: typecheck, lint, and build validation
# ì»¤ë°‹ ì „ ê²€ì¦: íƒ€ì… ì²´í¬, ë¦°íŠ¸, ë¹Œë“œ
#
# ë¹Œë“œ ê±´ë„ˆë›°ë ¤ë©´: SKIP_BUILD=1 git commit -m "message"
# ì „ì²´ ê±´ë„ˆë›°ë ¤ë©´: git commit --no-verify -m "message"

echo "ğŸ” Running pre-commit checks..."

# 1. TypeScript type check
echo "ğŸ“ Type checking..."
pnpm typecheck || exit 1

# 2. Biome lint/format check
echo "ğŸ§¹ Linting..."
pnpm check || exit 1

# 3. Build all apps (skip with SKIP_BUILD=1)
if [ "$SKIP_BUILD" != "1" ]; then
  echo "ğŸ—ï¸ Building..."
  pnpm build || exit 1
fi

echo "âœ… All checks passed!"

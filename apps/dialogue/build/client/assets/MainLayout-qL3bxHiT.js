import{a as n,p as e,x as J,y as Q,z as Z}from"./chunk-JMJ3UQ3L-CtBvknmL.js";import{u as z,a as G}from"./context-Y1-V1R-B.js";import{u as X,g as M,a as A}from"./ui-store-k8JEsPY-.js";function Y(t){var s,d,l="";if(typeof t=="string"||typeof t=="number")l+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(s=0;s<a;s++)t[s]&&(d=Y(t[s]))&&(l&&(l+=" "),l+=d)}else for(d in t)t[d]&&(l&&(l+=" "),l+=d);return l}function ee(){for(var t,s,d=0,l="",a=arguments.length;d<a;d++)(t=arguments[d])&&(s=Y(t))&&(l&&(l+=" "),l+=s);return l}function B(...t){return ee(t)}function te({onSend:t,disabled:s=!1}){const{t:d}=z(),[l,a]=n.useState(""),c=n.useCallback(()=>{const o=l.trim();!o||s||(t(o),a(""))},[l,s,t]),u=n.useCallback(o=>{o.key==="Enter"&&!o.shiftKey&&(o.preventDefault(),c())},[c]);return e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsx("textarea",{value:l,onChange:o=>a(o.target.value),onKeyDown:u,placeholder:d.placeholder,disabled:s,rows:1,className:"flex-1 px-4 py-3 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("button",{onClick:c,disabled:s||!l.trim(),className:"px-4 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d.send})]})}function se({message:t}){const s=t.role==="user";return e.jsxs("div",{className:B("flex gap-3 animate-fade-in",s?"flex-row-reverse":"flex-row"),children:[e.jsx("div",{className:B("w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 text-sm font-medium",s?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300"),children:s?"U":"D"}),e.jsx("div",{className:B("max-w-[80%] px-4 py-2 rounded-2xl",s?"bg-blue-600 text-white rounded-br-md":"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-bl-md"),children:e.jsx("p",{className:"whitespace-pre-wrap break-words",children:t.content})})]})}function V(){const{t}=z(),s=n.useRef(null),[d,l]=n.useState(!1),[a,c]=n.useState([]),{isHydrated:u,ghostMode:o,activeConversationId:j,getActiveConversation:v,createConversation:f,addMessage:b,clearActive:N}=X(),C=v(),k=o?a:(C==null?void 0:C.messages)??[];n.useEffect(()=>{if(u){if(!j&&!o){const x={id:M(),role:"assistant",content:t.welcome,timestamp:Date.now()};f(x)}o&&a.length===0&&c([{id:M(),role:"assistant",content:t.welcome,timestamp:Date.now()}])}},[u,j,o,t.welcome,f,a.length]),n.useEffect(()=>{var x;(x=s.current)==null||x.scrollIntoView({behavior:"smooth"})},[k]);const w=n.useCallback(async x=>{const g={id:M(),role:"user",content:x,timestamp:Date.now()};o?c(y=>[...y,g]):b(g),l(!0),await new Promise(y=>setTimeout(y,500+Math.random()*500));const p={id:M(),role:"assistant",content:t.noResults,timestamp:Date.now()};o?c(y=>[...y,p]):b(p),l(!1)},[o,b,t.noResults]),i=n.useCallback(()=>{if(o)c([{id:M(),role:"assistant",content:t.welcome,timestamp:Date.now()}]);else{N();const x={id:M(),role:"assistant",content:t.welcome,timestamp:Date.now()};f(x)}},[o,N,f,t.welcome]);return u?e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold",children:t.title}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.subtitle})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsx("span",{className:"px-2 py-1 text-xs bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded",children:t.ghostMode}),e.jsx("button",{onClick:i,className:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:t.newChat})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[k.map(x=>e.jsx(se,{message:x},x.id)),d&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center flex-shrink-0 text-sm font-medium text-gray-600 dark:text-gray-300",children:"D"}),e.jsx("div",{className:"px-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-2xl rounded-bl-md",children:e.jsx("span",{className:"animate-pulse",children:t.thinking})})]}),e.jsx("div",{ref:s})]}),e.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx(te,{onSend:w,disabled:d})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-gray-400",children:t.thinking})})}function re(){const{t,locale:s,setLocale:d}=z(),{resolvedTheme:l,toggleTheme:a}=G();return e.jsxs("header",{className:"h-14 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between px-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-xl font-bold",children:t.title})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:a,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:l==="dark"?t.lightMode:t.darkMode,children:l==="dark"?e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),e.jsx("button",{onClick:()=>d(s==="en"?"ko":"en"),className:"px-3 py-1.5 text-sm rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:s==="en"?"한국어":"English"}),e.jsx("a",{href:s==="ko"?"/ko/about":"/about",className:"px-3 py-1.5 text-sm rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:t.about})]})]})}function W(){const{t}=z(),{resultContent:s,closeResultPanel:d}=A();return e.jsx("div",{className:"flex h-full flex-col bg-white dark:bg-gray-900",children:s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 dark:border-gray-700 px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg",children:[s.type==="report"&&e.jsx(ne,{}),s.type==="info"&&e.jsx(le,{}),s.type==="help"&&e.jsx(oe,{})]}),e.jsx("h2",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:s.title})]}),e.jsx("button",{type:"button",onClick:d,className:"p-1.5 rounded-lg text-gray-500 dark:text-gray-400 transition-all duration-200 hover:bg-red-500/10 hover:text-red-500 active:scale-95","aria-label":"Close panel",children:e.jsx(ie,{})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsx("div",{className:"prose prose-sm max-w-none text-gray-900 dark:text-gray-100 whitespace-pre-wrap",children:s.content})})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400 dark:text-gray-500 p-8",children:[e.jsx(ae,{}),e.jsx("p",{className:"mt-4 text-sm text-center",children:t.aboutFeatures||"Results, reports, and tools will appear here"})]})})}function ae(){return e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"48",height:"48",className:"text-gray-300 dark:text-gray-600",children:e.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"})})}function ne(){return e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",className:"text-blue-600 dark:text-blue-400",children:e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"})})}function le(){return e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",className:"text-blue-600 dark:text-blue-400",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})}function oe(){return e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",className:"text-blue-600 dark:text-blue-400",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"})})}function ie(){return e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:e.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})}const q="hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-blue-600 dark:hover:text-blue-400",de="focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1",T=`flex w-full items-center gap-3 rounded-lg px-3 py-2 text-sm transition-all duration-200 ${q} ${de}`;function ce({onNewChat:t,onLoadConversation:s}){const d=J(),l=Q(),{t:a,locale:c,setLocale:u}=z(),{resolvedTheme:o,toggleTheme:j}=G(),{conversations:v,activeConversationId:f,ghostMode:b,isHydrated:N,toggleGhostMode:C,loadConversation:k,deleteConversation:w}=X(),{sidebarCollapsed:i,toggleSidebarCollapse:x}=A(),[g,p]=n.useState(!1),y=[{code:"en",label:"English",flag:"EN"},{code:"ko",label:"한국어",flag:"KO"}],I=n.useCallback(()=>{const r=l.pathname;return r.startsWith("/ko")?r.slice(3)||"/":r},[l.pathname]),L=n.useCallback(r=>{const h=I();return r==="en"?h:h==="/"?`/${r}`:`/${r}${h}`},[I]),m=n.useCallback(r=>{u(r);const h=L(r);d(h,{replace:!0})},[u,L,d]),E=()=>c==="en"?"/about":`/${c}/about`,$=n.useCallback(r=>{k(r.id),s==null||s()},[k,s]),D=n.useCallback((r,h)=>{r.preventDefault(),r.stopPropagation(),w(h)},[w]),H=r=>{const h=new Date(r),R=Math.floor((new Date().getTime()-h.getTime())/(1e3*60*60*24));return R===0?h.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):R<7?h.toLocaleDateString([],{weekday:"short"}):h.toLocaleDateString([],{month:"short",day:"numeric"})};return e.jsxs("aside",{className:`flex h-full flex-col border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 transition-all duration-200 ${i?"w-14":"w-52"}`,children:[e.jsxs("div",{className:`flex items-center border-b border-gray-200 dark:border-gray-700 px-3 py-3 ${i?"justify-center":"justify-between"}`,children:[!i&&e.jsx("h2",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:a.history}),e.jsx("button",{type:"button",onClick:x,className:`p-1.5 rounded-lg transition-all duration-200 text-gray-500 dark:text-gray-400 ${q}`,"aria-label":i?"Expand sidebar":"Collapse sidebar",children:i?e.jsx(xe,{}):e.jsx(he,{})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:[e.jsxs("button",{type:"button",onClick:t,className:`w-full flex items-center gap-3 px-3 py-2.5 bg-blue-600 text-white rounded-lg text-sm font-medium transition-all duration-200 hover:bg-blue-700 active:scale-[0.98] ${i?"justify-center":""}`,title:i?a.newChat:void 0,children:[e.jsx(ue,{}),!i&&e.jsx("span",{children:a.newChat})]}),e.jsxs("button",{type:"button",onClick:C,className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-all duration-200 ${i?"justify-center":""} ${b?"bg-purple-500/20 text-purple-400":"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:i?a.ghostMode:void 0,children:[e.jsx(ge,{}),!i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"font-medium",children:a.ghostMode}),b&&e.jsx("div",{className:"text-xs opacity-70",children:a.ghostModeDesc})]}),b&&e.jsx(O,{})]})]}),!i&&N&&e.jsx("div",{className:"mt-4",children:v.length>0?e.jsx("div",{className:"flex flex-col gap-1",children:v.map(r=>e.jsxs("button",{type:"button",onClick:()=>$(r),className:`${T} group cursor-pointer w-full ${f===r.id?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,children:[e.jsx(me,{}),e.jsxs("div",{className:"flex-1 text-left overflow-hidden",children:[e.jsx("div",{className:"truncate text-sm",children:r.title||a.untitled}),e.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:H(r.updatedAt)})]}),e.jsx("button",{type:"button",onClick:h=>D(h,r.id),className:"opacity-0 group-hover:opacity-100 p-1 rounded hover:bg-red-500/20 hover:text-red-400 transition-all cursor-pointer",title:a.deleteChat,children:e.jsx(fe,{})})]},r.id))}):e.jsx("div",{className:"px-3 py-4 text-xs text-gray-400 dark:text-gray-500 text-center",children:a.noHistory})}),i&&b&&e.jsx("div",{className:"w-full flex justify-center",children:e.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-400 animate-pulse"})})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700",children:[!i&&e.jsxs("button",{type:"button",onClick:()=>p(!g),className:"w-full flex items-center justify-between px-3 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider hover:text-gray-500 transition-colors",children:[e.jsxs("span",{children:["─── ",a.more," ───"]}),e.jsx(be,{expanded:g})]}),g&&!i&&e.jsxs("div",{className:"px-2 pb-2 space-y-2",children:[e.jsxs("button",{type:"button",onClick:j,className:`${T} bg-gray-100 dark:bg-gray-700`,children:[e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:o==="dark"?e.jsx(P,{}):e.jsx(_,{})}),e.jsx("span",{className:"flex-1 text-left text-gray-900 dark:text-gray-100",children:o==="dark"?a.darkMode:a.lightMode})]}),e.jsx("div",{className:"flex flex-col gap-1",children:y.map(r=>e.jsxs("button",{type:"button",className:`${T} ${c===r.code?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,onClick:()=>m(r.code),children:[e.jsx("span",{className:`text-xs font-semibold w-7 h-5 flex items-center justify-center rounded ${c===r.code?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-500 dark:text-gray-400"}`,children:r.flag}),e.jsx("span",{className:"flex-1 text-left",children:r.label}),c===r.code&&e.jsx(O,{})]},r.code))})]}),i&&e.jsx("div",{className:"p-2",children:e.jsx("button",{type:"button",onClick:j,className:"w-full flex justify-center p-2 rounded-lg text-gray-500 dark:text-gray-400 transition-all duration-200 hover:bg-gray-100 dark:hover:bg-gray-700",title:o==="dark"?a.lightMode:a.darkMode,children:o==="dark"?e.jsx(P,{}):e.jsx(_,{})})}),e.jsxs("div",{className:"p-2 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs(Z,{to:E(),className:`${T} text-gray-600 dark:text-gray-400 ${i?"justify-center":""}`,title:i?a.about:void 0,children:[e.jsx(pe,{}),!i&&e.jsx("span",{children:a.about})]}),e.jsxs("div",{className:`mt-2 flex items-center gap-2 px-3 py-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-lg text-xs font-medium ${i?"justify-center px-2":""}`,children:[e.jsx(ye,{}),!i&&e.jsx("span",{children:a.offline})]})]})]})]})}function xe(){return e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),e.jsx("path",{d:"M9 3v18"}),e.jsx("path",{d:"m14 9 3 3-3 3"})]})}function he(){return e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),e.jsx("path",{d:"M9 3v18"}),e.jsx("path",{d:"m16 15-3-3 3-3"})]})}function ue(){return e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:e.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})})}function ge(){return e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:e.jsx("path",{d:"M12 2C7.03 2 3 6.03 3 11v9.5c0 .83 1.01 1.25 1.6.66l1.4-1.4 1.4 1.4c.39.39 1.02.39 1.41 0l1.4-1.4 1.4 1.4c.39.39 1.02.39 1.41 0l1.4-1.4 1.4 1.4c.59.59 1.6.17 1.6-.66V11c0-4.97-4.03-9-9-9zm-3 9c-.83 0-1.5-.67-1.5-1.5S8.17 8 9 8s1.5.67 1.5 1.5S9.83 11 9 11zm6 0c-.83 0-1.5-.67-1.5-1.5S14.17 8 15 8s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"})})}function me(){return e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"16",height:"16",children:e.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"})})}function fe(){return e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14",children:e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})}function P(){return e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:e.jsx("path",{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"})})}function _(){return e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:e.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1z"})})}function O(){return e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"16",height:"16",children:e.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})})}function be({expanded:t}){return e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14",className:`transition-transform duration-200 ${t?"rotate-180":""}`,children:e.jsx("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})})}function pe(){return e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})}function ye(){return e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}const ve={mobile:768},S={min:280,max:600,default:360},U="flex-1 py-3 text-sm font-medium transition-colors text-center",F="border-b-2 border-blue-600 text-blue-600 dark:border-blue-400 dark:text-blue-400",K="text-gray-500 dark:text-gray-400";function Ce(){const{t}=z(),[s,d]=n.useState(!1),[l,a]=n.useState(!1),[c,u]=n.useState("chat"),[o,j]=n.useState(S.default),[v,f]=n.useState(!1),[b,N]=n.useState(0),[C,k]=n.useState(0),{sidebarOpen:w,sidebarCollapsed:i,resultPanelOpen:x,setSidebarOpen:g}=A(),p=n.useCallback(()=>{d(window.innerWidth<ve.mobile)},[]);n.useEffect(()=>(p(),requestAnimationFrame(()=>a(!0)),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)),[p]),n.useEffect(()=>{s&&g(!1)},[s,g]);const y=n.useCallback(m=>{m.preventDefault(),f(!0),document.body.style.cursor="col-resize",document.body.style.userSelect="none"},[]);n.useRef(null),n.useEffect(()=>{if(!v)return;const m={collapsed:56,expanded:208},E=D=>{const H=i?m.collapsed:m.expanded,r=D.clientX-H,h=Math.max(S.min,Math.min(S.max,r));j(h)},$=()=>{f(!1),document.body.style.cursor="",document.body.style.userSelect=""};return window.addEventListener("mousemove",E),window.addEventListener("mouseup",$),()=>{window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",$)}},[v,i]),n.useEffect(()=>{s&&x&&u("result")},[s,x]);const I=n.useCallback(()=>{N(m=>m+1)},[]),L=n.useCallback(()=>{k(m=>m+1)},[]);return e.jsxs("div",{className:"flex h-screen flex-col bg-white dark:bg-gray-900",children:[e.jsx(re,{}),e.jsxs("main",{className:"flex flex-1 overflow-hidden",children:[s&&w&&e.jsx("button",{type:"button",className:"fixed inset-0 z-40 bg-black/50 md:hidden border-none cursor-default",onClick:()=>g(!1),"aria-label":"Close sidebar"}),e.jsx("div",{className:`z-50 max-md:fixed max-md:inset-y-0 max-md:left-0 max-md:pt-14 md:relative ${l?"max-md:transition-transform max-md:duration-200":""} ${w?"":"max-md:-translate-x-full"}`,children:e.jsx(ce,{onNewChat:I,onLoadConversation:L})}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-1 flex-col min-h-[200px] md:hidden",children:[e.jsxs("div",{className:"flex shrink-0 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:[e.jsx("button",{type:"button",onClick:()=>u("chat"),className:`${U} ${c==="chat"?F:K}`,children:t.title}),e.jsx("button",{type:"button",onClick:()=>u("result"),className:`${U} ${c==="result"?F:K}`,children:t.aboutInfo||"Results"})]}),e.jsxs("div",{className:"flex-1 overflow-auto min-h-[150px]",children:[c==="chat"&&e.jsx(V,{}),c==="result"&&e.jsx(W,{})]})]}),e.jsxs("div",{className:"hidden md:flex md:flex-1",children:[e.jsxs("div",{className:"relative shrink-0 border-r border-gray-200 dark:border-gray-700 min-h-[200px]",style:{width:`${o}px`},children:[e.jsx(V,{}),e.jsx("div",{onMouseDown:y,role:"slider","aria-orientation":"vertical","aria-label":"Resize chat panel","aria-valuenow":o,"aria-valuemin":S.min,"aria-valuemax":S.max,tabIndex:0,className:"absolute -right-1 top-0 h-full w-3 cursor-col-resize flex items-center justify-center group",children:e.jsx("div",{className:`h-full w-1 transition-colors duration-150 group-hover:bg-blue-400/30 group-active:bg-blue-400/50 ${v?"bg-blue-400/50":""}`})})]}),e.jsx("div",{className:"flex-1",children:e.jsx(W,{})})]})]})]}),e.jsxs("footer",{className:"border-t border-gray-200 dark:border-gray-700 px-4 py-2 text-center text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:"Dialogue"}),e.jsx("span",{className:"mx-2",children:"·"}),e.jsx("span",{children:"UI/UX based on web standards"})]})]})}export{Ce as M};
